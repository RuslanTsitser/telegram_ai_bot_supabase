# Telegram Bot для анализа питания

Telegram бот, который помогает анализировать рацион питания.
Бот использует GPT-4 для анализа текстовых описаний и изображений еды.

## Структура проекта

```structure
telegram_bot_supabase/
|--- supabase/
    |--- functions/
        |--- deepseek-bot/
            |--- scripts/               # Скрипты
                |--- deploy.sh             # Деплой
                |--- run.sh                # Запуск
                |--- set_env.sh            # Настройка переменных окружения
            |--- src/               # Скрипты
                |--- ai/                   # AI обработчики
                |--- db/                   # БД обработчики
                |--- interfaces/           # Интерфейсы
                |--- prompts/              # Промпты
                |--- telegram/             # Telegram обработчики
                |--- utils/                # Утилиты
            |--- .env                  # Переменные окружения
            |--- deno.json             # Дено зависимости
            |--- index.ts              # Основной файл бота
|--- README.md
```

## Переменные окружения

```env
DEEPSEEK_BOT_TOKEN=your_telegram_bot_token
DEEPSEEK_BOT_FUNCTION_SECRET=your_function_secret
PIAPI_KEY=your_piapi_key
YOOKASSA_PROVIDER_TOKEN=your_yookassa_provider_token
```

## Бизнес правила

В таблице у юзеров есть поля
is_premium - это поле перманентный премиум. Я как админ могу назначать, кому доступен полный функционал
premium_expires_at - для тех, кто купил

Проверка премиума в таком формате:

1) Сначала проверяю is_premium
2) Если не премиум, то проверяю активен ли еще текущий премиум

Тарифы:

1) Пробный на 3 дня
2) Недельный
3) Месячный

Для бесплатного юзера будет доступен анализ по текстовому описанию еды 5 записей в сутки
Для премиум юзера будет доступен анализ по текстовому описанию еды и изображению еды без ограничений

## Лицензия

MIT
