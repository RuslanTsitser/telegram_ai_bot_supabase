# Load Stats API

Функция для получения общей статистики системы.

## Endpoint
```
https://your-project.supabase.co/functions/v1/load-stats
```

## Метод
**GET** - получение статистики системы

## Параметры запроса

Функция не принимает параметров запроса.

## Пример запроса

```bash
curl -X GET "https://your-project.supabase.co/functions/v1/load-stats" \
  -H "Authorization: Bearer YOUR_ANON_KEY"
```

## Ответ

```json
{
  "success": true,
  "data": {
    "total_users": 1250,
    "total_analyses": 15680,
    "avg_score": 7.2
  }
}
```

## Поля статистики

| Поле | Тип | Описание |
|------|-----|----------|
| `total_users` | number | Общее количество пользователей в системе |
| `total_analyses` | number | Общее количество анализов еды |
| `avg_score` | number | Средняя оценка питательности (округлено до 1 знака) |

## Особенности расчета

### Общее количество пользователей
- Подсчитывается количество записей в таблице `users`
- Включает всех зарегистрированных пользователей

### Общее количество анализов
- Подсчитывается количество записей в таблице `food_analysis`
- Включает все проведенные анализы еды

### Средняя оценка питательности
- Рассчитывается как среднее арифметическое всех оценок `nutrition_score`
- Исключаются записи с `null` значениями
- Округляется до 1 знака после запятой
- Может быть `null` если нет анализов с оценками

## Коды ошибок

- `500` - Внутренняя ошибка сервера

## Особенности

- **Быстрый доступ** - функция оптимизирована для быстрого получения статистики
- **Агрегированные данные** - возвращает только сводную информацию
- **CORS поддержка** - функция поддерживает кросс-доменные запросы
- **Административная функция** - предназначена для мониторинга системы
- **Дашборд** - идеально подходит для отображения на административной панели
- **Мониторинг** - полезна для отслеживания роста пользовательской базы
